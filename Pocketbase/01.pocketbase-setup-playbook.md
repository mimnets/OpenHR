
# OpenHR PocketBase Setup Playbook

PocketBase is the easiest way to run OpenHR locally or on a private server.

## 1. Installation
1. Download the executable from [pocketbase.io](https://pocketbase.io/).
2. Extract it and run: `./pocketbase serve`
3. Access the Admin UI at `http://127.0.0.1:8090/_/`

## 2. Admin Creation
1. On the first run, create your **Primary Admin Account**. This is for the database UI, not the HR system.

## 3. Creating Collections (CRITICAL)
Create the following collections exactly as named:

### employees
- `name` (text)
- `email` (email)
- `role` (select: ADMIN, HR, MANAGER, EMPLOYEE)
- `department` (text)
- `designation` (text)
- `salary` (number)
- `status` (select: ACTIVE, INACTIVE, ON_LEAVE)
- `employment_type` (select: PERMANENT, CONTRACT, TEMPORARY)
- `joining_date` (date)

### attendance
- `employee_id` (text)
- `employee_name` (text)
- `date` (text)
- `check_in` (text)
- `check_out` (text)
- `status` (text)
- `selfie` (text/url)

### leaves
- `employee_id` (text)
- `employee_name` (text)
- `type` (text)
- `start_date` (text)
- `end_date` (text)
- `total_days` (number)
- `status` (text)

## 4. API Permissions (CORS & RLS)
1. Go to **Settings > Access Rules**.
2. For development, you can set `List/Search` and `View` to "Public".
3. For production, ensure `Create/Update` requires `request.auth.id != ""`.

## 5. Email Setup (The Fix)
PocketBase has a built-in SMTP sender!
1. Go to **Settings > Mail Settings**.
2. Toggle **Use SMTP**.
3. Enter your SMTP details (e.g., from Mailtrap, Gmail, or SendGrid).
4. Once set up, PocketBase handles password resets and email verification natively.

## 6. App Connection
1. In OpenHR, go to **Settings > Infrastructure**.
2. Select **PocketBase**.
3. Set URL to `http://127.0.0.1:8090`.
4. Click **Test Connection** then **Save**.
